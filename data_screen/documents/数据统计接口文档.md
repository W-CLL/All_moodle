

*Author: 陈楷锋*

*Last modified*: 2019/12/12



[TOC]























---

# 数据统计接口文档



## URL

http://10.248.54.20/webservice/rest/server.php



## 公共参数

| 参数名             | 参数类型 | 说明     | 非空 |
| ------------------ | -------- | -------- | ---- |
| moodlewsrestformat | string   | 参数格式 | 是   |
| wstoken            | string   | 令牌     | 是   |
| wsfunction         | string   | 接口名称 | 是   |

## 接口

### 1.平台概况

**参数**

| 参数名             | 参数类型 | 参数值                              | 说明     | 非空 |
| ------------------ | -------- | ----------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                                | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2    | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_platform_overview | 接口名称 | 是   |

**返回**

```json
{
    "platform": {     
        "course_num": 5,			// 课程总数
        "course_add": "100%",		// 近一个月课程增加
        "teacher_num": 1,			// 教师总数
        "teacher_add": "100%",		// 近一个月教师增加
        "student_num": 2,			// 学生总数
        "student_add": "100%",		// 近一个月学生增加
        "effective_num": 1,			// 开设课程数
        "effective_add": "100%",	// 近一个月有效课程增加
        "percourse_num": 2,			// 学生人均选课数
        "percourse_add": "100%",	// 近一个月学生人均选课增加
        "pv_num": 18,				// 月访问量
        "pv_add": ""				// 近一个月访问量增加
    },
    "effective": [
        {
            "title": "2019 下学期",	// 标题
            "counts": 0				  // 课程数
        },
        {
            "title": "2019 上学期",
            "counts": 0
        }
    ],
    "pv": [
        {
            "title": "2019 下学期",	// 标题
            "pv": 0				  	  // 访问数
        },
        {
            "title": "2019 上学期",
            "pv": 67
        }
    ]
}
```

**返回参数说明**

| 参数名    | 参数类型 | 参数说明     |
| --------- | -------- | ------------ |
| platform  | json     | 平台概况     |
| effective | array    | 开设课程图表 |
| pv        | array    | 访问量图表   |



### 2.获取课程标签（课程立项和课程属性）

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明 | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_get_tags       | 接口名称 | 是   |

**返回**

```json
{
    "course_pro": [	
        {
            "id": 16,						// 课程立项标签ID
            "name": "校级在线开放课程"		   // 课程立项标签名称
        },
        {
            "id": 17,
            "name": "校级精品在线开放课程"
        },
        {
            "id": 18,
            "name": "院级在线开放课程"
        }
    ],
    "course_att": [
        {
            "id": 10,						// 课程属性标签ID
            "name": "专业方向课程"			// 课程属性标签名称
        },
        {
            "id": 11,
            "name": "专业核心课程"
        },
        {
            "id": 12,
            "name": "公共必修课程"
        },
        {
            "id": 13,
            "name": "学科大类课程"
        },
        {
            "id": 14,
            "name": "教师教育课程"
        },
        {
            "id": 15,
            "name": "通识教育课程"
        }
    ]
}
```

**返回参数说明**

| 参数名称   | 参数类型 | 参数说明         |
| ---------- | -------- | ---------------- |
| course_pro | array    | 课程立项标签数据 |
| course_att | array    | 课程属性标签数据 |



### 3.属性课程

**参数**

| 参数名称           | 参数类型 | 参数值                             | 参数说明                                      | 非空 |
| ------------------ | -------- | ---------------------------------- | --------------------------------------------- | ---- |
| moodlewsrestformat | string   | json                               | 参数格式                                      | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2   | 令牌                                          | 是   |
| wsfunction         | string   | block_data_screen_attribute_course | 接口名称                                      | 是   |
| course_pro         | int      | 默认为空                           | 课程立项ID（默认0为忽略该项）                 | 否   |
| course_att         | int      | 默认为空                           | 课程属性ID（默认0为忽略该项）                 | 否   |
| start_time         | string   | 默认为空                           | 开始时间（默认为忽略该项）,如：2019-05-01     | 否   |
| end_time           | string   | 默认为空                           | 结束时间（默认为忽略该项）,如：2019-05-01     | 否   |
| open_times         | int      | 默认为空                           | 开设轮数（默认-1为忽略该项）                  | 否   |
| page               | int      | 1                                  | 页码（默认1为第一页）                         | 否   |
| pagesize           | int      | 10                                 | 每页返回数据条数（默认返回10条，0为返回所有） | 否   |

**返回**

```json
{
    "page": {
        "max_page": 1,								// 最大页数
        "cur_page": 1								// 当前页数
    },
    "data": [
        {
            "course_id": 2,							// 课程ID
            "fullname": "高等数学",					  // 课程全称
            "shortname": "高数",					   // 课程简称
            "start_time": 1557763200,				// 课程开始时间戳
            "end_time": 1589299200,					// 课程结束时间戳
            "teachers": "Chen",						// 课程教师名称
            "open_times": 1,						// 课程开设轮数
            "tags": "公共必修课程,校级在线开放课程"		// 课程属性
        },
        {
            "course_id": 6,
            "fullname": "计算机网络技术",
            "shortname": "计算机网络",
            "start_time": 1558368000,
            "end_time": 1589904000,
            "teachers": "Chen",
            "open_times": 3,
            "tags": "专业方向课程,校级在线开放课程"
        }
    ]
}
```

**返回参数说明**

| 参数名称 | 参数类型 | 参数说明 |
| -------- | -------- | -------- |
| page     | json     | 分页数据 |
| data     | array    | 课程数据 |



### 4.课程类别

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明 | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_get_category   | 接口名称 | 是   |

**返回**

```json
[
    {
        "id": 1,
        "name": "其他"
    },
    {
        "id": 2,
        "name": "信息技术学院"
    }
]
```

**返回参数说明**

| 参数名称 | 参数类型 | 参数说明 |
| -------- | -------- | -------- |
| id       | int      | 类别ID   |
| name     | string   | 类别名称 |



### 5.无用课程

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                              | 非空 |
| ------------------ | -------- | -------------------------------- | ----------------------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                              | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                                  | 是   |
| wsfunction         | string   | block_data_screen_invalid_course | 接口名称                                              | 是   |
| category_id        | int      | 默认为空                         | 课程类别ID（默认0为所有栏目）                         | 否   |
| start_time         | string   | 默认为空                         | 开始时间（默认0为忽略该项）,如：2019-05-01            | 否   |
| end_time           | string   | 默认为空                         | 结束时间（默认0为忽略该项）,如：2019-05-01            | 否   |
| judgment           | int      | 默认为空                         | 判断依据（默认0为忽略该项，1：没有教师，2：没有活动） | 否   |
| page               | int      | 1                                | 页码（默认1为第一页）                                 | 否   |
| pagesize           | int      | 10                               | 每页返回数据条数（默认返回10条，0为所有）             | 否   |

**返回**

```json
{
    "page": {
        "max_page": 1,							// 最大页数
        "cur_page": 1							// 当前页数
    },
    "course_list": [
        {
            "course_id": 3,						// 课程ID
            "fullname": "数据结构与算法",		    // 课程全称
            "shortname": "数据结构",			  // 课程简称	
            "start_time": 1558368000,			// 课程开始时间
            "end_time": 1589904000,				// 课程结束时间
            "teachers": "Chen",					// 课程教师
            "category": "信息技术学院",			// 课程类别
            "judgment": "没有活动"				  // 判断依据
        },
        {
            "course_id": 4,
            "fullname": "C语言程序设计",
            "shortname": "C语言",
            "start_time": 1558368000,
            "end_time": 1589904000,
            "teachers": null,
            "category": "信息技术学院",
            "judgment": "没有教师"
        },
        {
            "course_id": 5,
            "fullname": "计算机导论",
            "shortname": "计算机导论",
            "start_time": 1558368000,
            "end_time": 1589904000,
            "teachers": "Chen",
            "category": "信息技术学院",
            "judgment": "没有活动"
        }
    ]
}
```

**返回参数说明**

| 参数名称    | 参数类型 | 参数说明     |
| ----------- | -------- | ------------ |
| page        | json     | 分页数据     |
| course_list | array    | 无用课程数据 |



### 6.访问分析（表格）

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                  | 非空 |
| ------------------ | -------- | -------------------------------- | ----------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                  | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                      | 是   |
| wsfunction         | string   | block_data_screen_access_table   | 接口名称                                  | 是   |
| start_time         | string   | 默认为空                         | 开始时间（默认为忽略该项）,如：2019-05-01 | 否   |
| end_time           | string   | 默认为空                         | 结束时间（默认为忽略该项）,如：2019-05-01 | 否   |

**返回**

```json
{
    "today": {
        "pv": 90,				// 浏览次数
        "uv": 7,				// 独立访客
        "ip": 10,				// IP
        "access_num": 5			// 访问次数
    },
    "yesterday": {
        "pv": 23,
        "uv": 11,
        "ip": 13,
        "access_num": 7
    },
    "top": {
        "pv": 129,
        "uv": 19,
        "ip": 14,
        "access_num": 15
    },
    "total": {
        "pv": 28,
        "uv": 10,
        "ip": 7,
        "access_num": 8
    }
}
```

**返回参数说明**

| 参数名称  | 参数类型 | 参数说明                                                     |
| --------- | -------- | ------------------------------------------------------------ |
| today     | json     | 今日访问数据                                                 |
| yesterday | json     | 昨日访问数据                                                 |
| top       | json     | 历史最高访问数据                                             |
| total     | json     | 默认所有历史数据总计，传入`start_time`或`end_time`参数设置时间段时为时间段内数据总计 |



### 7.访问分析（图表）

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明               | 非空 |
| ------------------ | -------- | -------------------------------- | ---------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式               | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                   | 是   |
| wsfunction         | string   | block_data_screen_access_chart   | 接口名称               | 是   |
| date               | string   | 2019-05-15                       | 日期（默认为当前日期） | 否   |

**返回**

```json
[
    {
        "pv": 0,					// 浏览次数
        "uv": 0,					// 独立用户
        "ip": 0,					// 独立IP
        "access_num": 0,			// 访问次数
        "hour": 0					// 小时
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 1
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 2
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 3
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 4
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 5
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 6
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 7
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 8
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 9
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 10
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 11
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 12
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 13
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 14
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 15
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 16
    },
    {
        "pv": 89,
        "uv": 2,
        "ip": 1,
        "access_num": 2,
        "hour": 17
    },
    {
        "pv": 40,
        "uv": 2,
        "ip": 1,
        "access_num": 2,
        "hour": 18
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 19
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 20
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 21
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 22
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 23
    },
    {
        "pv": 0,
        "uv": 0,
        "ip": 0,
        "access_num": 0,
        "hour": 24
    }
]
```



### 8.学院概况

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                     | 非空 |
| ------------------ | -------- | -------------------------------- | -------------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                     | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                         | 是   |
| wsfunction         | string   | block_data_screen_college_list   | 接口参数                                     | 是   |
| page               | int      | 1                                | 页码（默认1为第一页）                        | 否   |
| pagesize           | int      | 15                               | 每页返回数据条数（默认返回15条,0为返回所有） | 否   |
| start_time         | string   | 默认为空                         | 开始时间（默认为忽略该项）,如：2019-05-01    | 否   |
| end_time           | string   | 默认为空                         | 结束时间（默认为忽略该项）,如：2019-05-01    | 否   |
| name               | string   | 默认为空                         | 学院名称（默认空为所有学院）                 | 否   |

**返回**

```json
{
    "page": {
        "max_page": 1,				// 最大页码
        "cur_page": 1				// 当前页码
    },
    "college_list": [
        {
            "id": 1,				// 学院ID
            "idnumber": "0",		// ID
            "name": "其他",		   // 学院名称
            "course_num": 0,		// 课程数
            "student_num": 0,		// 学生数
            "teacher_num": "0"		// 教师数
        },
        {
            "id": 2,
            "idnumber": "1",
            "name": "信息技术学院",
            "course_num": 4,
            "student_num": 2,
            "teacher_num": "2"
        }
    ]
}
```

**返回参数说明**

| 参数名称     | 参数类型 | 参数说明 |
| ------------ | -------- | -------- |
| page         | json     | 分页数据 |
| college_list | array    | 学院数据 |



### 9.学院详情

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                  | 非空 |
| ------------------ | -------- | -------------------------------- | ----------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                  | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                      | 是   |
| wsfunction         | string   | block_data_screen_college_detail | 接口名称                                  | 是   |
| catid              | int      | 1                                | 学院ID                                    | 是   |
| page               | int      | 1                                | 页码（默认为第一页）                      | 否   |
| pagesize           | int      | 12                               | 每页返回数据条数（默认返回12条，0为所有） | 否   |

**返回**

```json
{
    "course_list": [
        {
            "course_id": 2,				// 课程ID
            "fullname": "高等数学",		 // 课程全称
            "student_num": 2,			// 选课人数
            "teachers": "Chen",			// 课程老师
            "img": 		"http://10.248.54.20/pluginfile.php/27/course/overviewfiles/assassins_creed_assassin_michael_fassbender_110232_1600x900.jpg"	// 课程封面
        }
    ],
    "college": {
        "course_num": 1,				// 学院课程数
        "course_avg": "-60%",			// 学院课程数相较平均数百分比，负数为低于平均
        "teacher_num": 1,				// 学院教师数
        "teacher_avg": "-33%",			// 学院教师数相较平均数百分比
        "student_num": 2,				// 学院学生人数
        "student_avg": "-0%",			// 学院学生人数相较平均数百分比
        "resource_num": 1,				// 学院资源数
        "resource_avg": "100%",			// 学院资源数相较平均数百分比
        "activity_num": 2,				// 学院活动数
        "activity_avg": "-43%",			// 学院活动数相较平均数百分比
        "access_num": 11,				// 学院访问数
        "access_avg": "-21%",			// 学院访问数相较平均数百分比
        "name": "信息技术学院",			// 学院名称
    },
    "page": {
        "max_page": 1,					// 最大页码
        "cur_page": 1					// 当前页码
    }
}
```

**返回参数说明**

| 参数名称    | 参数类型 | 参数说明     |
| ----------- | -------- | ------------ |
| course_list | array    | 学院课程数据 |
| college     | json     | 学院统计数据 |
| page        | json     | 分页数据     |



### 10.获取教师院系列表

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_get_dept       | 接口名称 | 是   |

**返回**

```json
[
    "信息技术学院",		// 学院名称
    "生化学院"
]
```



### 11.老师概况

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                  | 非空 |
| ------------------ | -------- | -------------------------------- | ----------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                  | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                      | 是   |
| wsfunction         | string   | block_data_screen_teacher_list   | 接口名称                                  | 是   |
| dept               | string   | 默认为空                         | 学院名称                                  | 否   |
| name               | string   | 默认为空                         | 教师名称                                  | 否   |
| page               | int      | 1                                | 页码（默认为第一页）                      | 否   |
| pagesize           | int      | 10                               | 每页返回数据条数（默认返回10条，0为所有） | 否   |

**返回**

```json
{
    "page": {
        "max_page": 1,					// 最大页码
        "cur_page": 1					// 当前页码
    },
    "teacher_list": [
        {
            "teacher_id": 2,			// 教师ID
            "name": "Chen",				// 教师名称
            "url": "http://10.248.54.20/pluginfile.php/5/user/icon/lambda/f1?rev=26",
            							// 头像
            "dept": "信息技术学院",		// 所属学院
            "course_num": 4,			// 课程数
            "student_num": 2,			// 学生数
            "res_avt_num": 7			// 资源活动数
        },
        {
            "teacher_id": 5,
            "name": "威尔",
            "url": "http://10.248.54.20/theme/image.php/_s/lambda/core/1559115889/u/f1",
            "dept": "",
            "course_num": 1,
            "student_num": 1,
            "res_avt_num": 2
        }
    ]
}
```

**返回参数说明**

| 参数名称     | 参数类型 | 参数说明 |
| ------------ | -------- | -------- |
| page         | json     | 分页数据 |
| teacher_list | array    | 教师数据 |



### 12.教师详情

**参数**

| 参数名称           | 参数类型 | 参数值                           | 参数说明                                  | 非空 |
| ------------------ | -------- | -------------------------------- | ----------------------------------------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式                                  | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌                                      | 是   |
| wsfunction         | string   | block_data_screen_teacher_detail | 接口名称                                  | 是   |
| id                 | int      | 2                                | 教师ID                                    | 是   |
| start_time         | string   | 默认为空                         | 开始时间（默认为忽略该项）                | 否   |
| end_time           | string   | 默认为空                         | 结束时间（默认为忽略该项）                | 否   |
| page               | int      | 1                                | 页码（默认为第一页）                      | 否   |
| pagesize           | int      | 12                               | 每页返回数据条数（默认返回12条，0为所有） | 否   |

**返回**

```json
{
    "course_list": [
        {
            "course_id": 2,					// 课程ID
            "fullname": "高等数学",			 // 课程全称
            "student_num": 2,				// 选课人数
            "img": 				"http://10.248.54.20/pluginfile.php/27/course/overviewfiles/assassins_creed_assassin_michael_fassbender_110232_1600x900.jpg"		// 课程封面
        }
    ],
    "teacher": {
        "name": "Chen",					    // 教师名称
        "course_num": 1,					// 课程总数
        "student_num": 2,					// 学生总数
        "open_times": 1,					// 最大开设轮数
        "spendtime_avg": 0,					// 平均访问时长（单位分钟）
        "recourse_avg": 2					// 平均资源活动数
    },
    "page": {
        "max_page": 1,						// 最大页码
        "cur_page": 1						// 当前页码
    }
}
```

**返回参数说明**

| 参数名称    | 参数类型 | 参数说明     |
| ----------- | -------- | ------------ |
| course_list | array    | 课程数据     |
| teacher     | json     | 教师统计数据 |
| page        | json     | 分页数据     |



### 13.获取学期课程类别

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_get_semester   | 接口名称 | 是   |

**返回**

```json
[
    {
        "semester": "17-18 上学期",			
        "course_list": []
    },
    {
        "semester": "18-19 下学期",				// 学期名称
        "course_list": [						  // 课程列表
            {
                "id": 3,						  // 课程ID	
                "fullname": "数据结构与算法"		 // 课程全称
            }
        ]
    }
]
```



### 14.课程概况

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_course_detail  | 接口名称 | 是   |
| id                 | int      | 2                                | 课程ID   | 是   |

**返回**

```json
{
    "course": {
        "fullname": "高等数学",					// 课程全称
        "summary": "高等级的数学课程",			 // 课程简介
        "img": 			"http://10.248.54.20/pluginfile.php/27/course/overviewfiles/assassins_creed_assassin_michael_fassbender_110232_1600x900.jpg",		   // 课程封面
        "resource_num": 1,					  // 资源数 
        "activity_num": 1,					  // 活动数
        "forums": 1,						  // 讨论数
        "assigns": 1,						  // 作业数
        "quizs": 1							  // 测验数
    },
    "teacher_list": [
        {
            "id": 2,							// 教师ID
            "name": "Chen",						// 教师名称
            "dept": "信息技术学院",				// 所属学院
            "url": "http://10.248.54.20/pluginfile.php/5/user/icon/lambda/f1?rev=26"
            									// 头像
        }
    ],
    "section": [
        {
            "name": "常规",					// 模块名称
            "item": [						 
                {
                    "name": "新闻通告",		// 活动名称
                    "completion": "",	   // 活动完成情况
                    "access": "8"			// 访问数
                }
            ]
        },
        {
            "name": "作业",
            "item": [
                {
                    "name": "高数作业",
                    "completion": "",
                    "access": "12"
                },
                {
                    "name": "测验",
                    "completion": "",
                    "access": "0"
                }
            ]
        },
        {
            "name": "主题二",
            "item": [
                {
                    "name": "图片",
                    "completion": "50%",
                    "access": "3"
                }
            ]
        },
        {
            "name": "主题三",
            "item": []
        },
        {
            "name": "主题四",
            "item": []
        }
    ]
}
```

**返回参数说明**

| 参数名称     | 参数类型 | 参数说明 |
| ------------ | -------- | -------- |
| course       | json     | 课程信息 |
| teacher_list | array    | 教师信息 |
| section      | array    | 课程模块 |



### 15.获取角色

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_get_role       | 接口名称 | 是   |

**返回**

```json
[
    {
        "id": 1,					// 角色ID
        "name": "管理员"			  // 角色名称
    },
    {
        "id": 2,
        "name": "课程创建者"
    },
    {
        "id": 3,
        "name": "教师"
    },
    {
        "id": 4,
        "name": "无编辑权教师"
    },
    {
        "id": 5,
        "name": "学生"
    },
    {
        "id": 6,
        "name": "访客"
    },
    {
        "id": 7,
        "name": "已认证用户"
    },
    {
        "id": 8,
        "name": "首页已认证用户"
    }
]
```



### 16.活动分析

**参数**

| 参数名             | 参数类型 | 参数值                              | 说明     | 非空 |
| ------------------ | -------- | ----------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                                | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2    | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_activity_analysis | 接口名称 | 是   |
| id                 | int      | 2                                   | 课程ID   | 是   |

**返回**

```json
{
    "resource_statistics": [
        {
            "name": "常规",
            "item": {	
                "assign": {						
                    "name": "作业",			   // 模块名称
                    "counts": 0					// 统计数
                },
                "quiz": {
                    "name": "测验",
                    "counts": 0
                },
                "hvp": {
                    "name": "hvp",
                    "counts": 0
                },
                "other": 0,						// 其他
                "forum": {
                    "name": "讨论区",
                    "counts": 1,
                    "discussions": 1,			// 话题数
                    "reply": 0					// 回复数
                },
                "resource": {					// 资源
                    "resource": 0,
                    "url": 1,
                    "page": 1,
                    "folder": 0,
                    "counts": 2
                }
            }
        },
        {
            "name": "作业",
            "item": {
                "assign": {
                    "name": "作业",
                    "counts": 2
                },
                "quiz": {
                    "name": "测验",
                    "counts": 1
                },
                "other": 0,
                "forum": {
                    "name": "讨论区",
                    "counts": 0,
                    "discussions": 0,
                    "reply": 0
                },
                "resource": {
                    "resource": 0,
                    "url": 0,
                    "page": 0,
                    "hvp": 0,
                    "folder": 0,
                    "counts": 0
                }
            }
        },
        {
            "name": "主题二",
            "item": {
                "assign": {
                    "name": "作业",
                    "counts": 0
                },
                "quiz": {
                    "name": "测验",
                    "counts": 0
                },
                "other": 0,
                "forum": {
                    "name": "讨论区",
                    "counts": 0,
                    "discussions": 0,
                    "reply": 0
                },
                "resource": {
                    "resource": 1,
                    "url": 0,
                    "page": 0,
                    "hvp": 0,
                    "folder": 1,
                    "counts": 2
                }
            }
        },
        {
            "name": "主题三",
            "item": {
                "assign": {
                    "name": "作业",
                    "counts": 0
                },
                "quiz": {
                    "name": "测验",
                    "counts": 0
                },
                "other": 0,
                "forum": {
                    "name": "讨论区",
                    "counts": 0,
                    "discussions": 0,
                    "reply": 0
                },
                "resource": {
                    "resource": 0,
                    "url": 0,
                    "page": 0,
                    "hvp": 1,
                    "folder": 0,
                    "counts": 1
                }
            }
        },
        {
            "name": "主题四",
            "item": {
                "assign": {
                    "name": "作业",
                    "counts": 0
                },
                "quiz": {
                    "name": "测验",
                    "counts": 0
                },
                "other": 0,
                "forum": {
                    "name": "讨论区",
                    "counts": 0,
                    "discussions": 0,
                    "reply": 0
                },
                "resource": {
                    "resource": 0,
                    "url": 0,
                    "page": 0,
                    "hvp": 0,
                    "folder": 0,
                    "counts": 0
                }
            }
        }
    ],
    "study_statistics": [
        {
            "name": "常规",
            "item": [
                {
                    "name": "百度",					// 资源名称
                    "visiter_num": 1,				 // 访问人数
                    "access_num": 4,				 // 访问量
                    "download_num": 0				 // 下载次数
                },
                {
                    "name": "page",
                    "visiter_num": 1,
                    "access_num": 2,
                    "download_num": 0
                }
            ]
        },
        {
            "name": "作业",
            "item": []
        },
        {
            "name": "主题二",
            "item": [
                {
                    "name": "图片",
                    "visiter_num": 9,
                    "access_num": 11,
                    "download_num": 0
                },
                {
                    "name": "文件夹",
                    "visiter_num": 3,
                    "access_num": 6,
                    "download_num": 2
                }
            ]
        },
        {
            "name": "主题三",
            "item": []
        },
        {
            "name": "主题四",
            "item": []
        }
    ],
    "assign_quiz_statistics": [
        {
            "name": "常规",
            "item": []
        },
        {
            "name": "作业",
            "item": [
                {
                    "name": "作业二",			// 作业/测验 名称
                    "posts": "1",			  // 提交人数
                    "avg": "3",				  // 平均成绩
                    "students": 2			  // 学生人数
                },
                {
                    "name": "测验",
                    "posts": "1",
                    "avg": "10",
                    "students": 2
                }
            ]
        },
        {
            "name": "主题二",
            "item": []
        },
        {
            "name": "主题三",
            "item": []
        },
        {
            "name": "主题四",
            "item": []
        }
    ],
    "assign_quiz_total": {
        "name": "统计",
        "item": [
            {
                "name": "作业",			// 作业统计
                "posts": "1",			 // 提交总人数
                "avg": "3",				 // 总平均成绩
                "students": "2"			 // 学生人数
            },
            {
                "name": "测验",			// 测验总计
                "posts": "1",
                "avg": "10",
                "students": "2"
            }
        ]
    },
    "forum_statistics": [
        {
            "name": "常规",
            "item": [
                {
                    "name": "新闻通告",		// 讨论区名称
                    "student_posts": 0,	   // 学生发帖数
                    "reply_student": 0,    // 回复学生帖子数
                    "teacher_posts": 1,	   // 教师发帖数
                    "reply_teacher": 0     // 回复教师帖子数
                }
            ]
        },
        {
            "name": "作业",
            "item": []
        },
        {
            "name": "主题二",
            "item": []
        },
        {
            "name": "主题三",
            "item": []
        },
        {
            "name": "主题四",
            "item": []
        }
    ],
    "course_name": "高等数学"
}
```

**返回参数说明**

| 参数名称               | 参数类型 | 参数说明     |
| ---------------------- | -------- | ------------ |
| resource_statistics    | array    | 资源统计     |
| study_statistics       | array    | 学习资源统计 |
| assign_quiz_statistics | array    | 测验作业统计 |
| assign_quiz_total      | json     | 测验作业总计 |
| forum_statistics       | array    | 讨论区统计   |
| course_name            | string   | 课程名称     |



### 17.个人分析

**参数**

| 参数名             | 参数类型 | 参数值                              | 说明                                      | 非空 |
| ------------------ | -------- | ----------------------------------- | ----------------------------------------- | ---- |
| moodlewsrestformat | string   | json                                | 参数格式                                  | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2    | 令牌                                      | 是   |
| wsfunction         | string   | block_data_screen_personal_analysis | 接口名称                                  | 是   |
| course             | int      | 2                                   | 课程ID                                    | 是   |
| role               | int      | 3                                   | 角色ID                                    | 否   |
| name               | string   | 张三                                | 用户姓名                                  | 否   |
| cur_role           | int      | 1                                   | 当前用户角色                              | 是   |
| user               | int      | 2                                   | 当前用户ID                                | 是   |
| page               | int      | 1                                   | 页码                                      | 否   |
| pagesize           | int      | 12                                  | 每页返回数据条数（默认返回12条，0为所有） | 否   |

**返回**

```json
{
    "course_list": [
        {
            "id": 2,							// 用户ID
            "avatar": "http://10.248.54.20/pluginfile.php/5/user/icon/lambda/f1?rev=26",
            									// 用户头像
            "name": "Chen",						// 用户名称
            "dept": "信息技术学院",				// 所属部门
            "idnumber": "",						// 用户工号
            "role": 3,							// 角色ID
            "spend_time": 1.2,					// 访问时长
            "login": 10,						// 登录次数
            "grade": 110,						// 成绩
            "completion_rate": "29%"			// 完成度
        },
        {
            "id": 3,
            "avatar": "http://10.248.54.20/theme/image.php/lambda/core/1561534797/u/f1",
            "name": "三",
            "dept": "",
            "idnumber": "",
            "role": 5
        }
    ],
    "course": "数据结构与算法",
    "page": {
        "max_page": 1,
        "cur_page": 1
    }
}
```

**返回参数说明**

| 参数名称    | 参数类型 | 参数说明     |
| ----------- | -------- | ------------ |
| course_list | array    | 课程用户列表 |
| course      | string   | 课程名称     |
| page        | json     | 分页数据     |



### 18.个人分析详情页面

**参数**

| 参数名             | 参数类型 | 参数值                            | 说明     | 非空 |
| ------------------ | -------- | --------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                              | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2  | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_personal_detail | 接口名称 | 是   |
| course             | int      | 2                                 | 课程ID   | 是   |
| role               | int      | 3                                 | 角色ID   | 是   |
| id                 | int      | 2                                 | 用户ID   | 是   |

**返回**

```json
{
    "user": {
        "course_name": "高等数学",
        "avatar": "http://10.248.54.20/pluginfile.php/5/user/icon/lambda/f1?rev=26", 
        										// 用户头像
        "name": "Chen",							// 用户名称
        "department": "信息技术学院",				// 所属院系
        "role": "",								// 角色名称
        "login": 38,							// 登录次数
        "spendtime": 12067,						// 访问时长
        "completionORcreated": 10			    // 角色为教师时该值为创建活动次数，为学生时为成绩
    },
    "section": [
        {
            "name": "常规",						// 主题名称
            "item": [
                {
                    "name": "新闻通告",				// 资源/活动 名称
                    "completion": "",			  // 学生完成度 （部分没有）
                    "access": "11"				  // 访问量
                },
                {
                    "name": "百度",
                    "completion": "100%",
                    "access": "4"
                },
                {
                    "name": "page",
                    "completion": "",
                    "access": "2"
                }
            ]
        },
        {
            "name": "作业",
            "item": [
                {
                    "name": "测验",
                    "completion": "",
                    "access": "30"
                },
                {
                    "name": "作业二",
                    "completion": "100%",
                    "access": "39"
                }
            ]
        },
        {
            "name": "主题二",
            "item": [
                {
                    "name": "图片",
                    "completion": "100%",
                    "access": "11"
                },
                {
                    "name": "文件夹",
                    "completion": "",
                    "access": "6"
                }
            ]
        },
        {
            "name": "主题三",
            "item": []
        },
        {
            "name": "主题四",
            "item": []
        }
    ]
}
```

**返回参数说明**

| 参数名称 | 参数类型 | 参数说明 |
| -------- | -------- | -------- |
| user     | json     | 用户数据 |
| section  | array    | 主题数据 |

### 19.活动完成情况

**参数**

| 参数名             | 参数类型 | 参数值                                           | 说明     | 非空 |
| ------------------ | -------- | ------------------------------------------------ | -------- | ---- |
| moodlewsrestformat | string   | json                                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2                 | 令牌     | 是   |
| wsfunction         | string   | core_completion_get_activities_completion_status | 接口名称 | 是   |
| courseid           | int      | 2                                                | 课程ID   | 是   |
| userid             | int      | 2                                                | 用户ID   | 是   |

**返回**

```json
{
    "statuses": [
        {
            "cmid": 15,					// course_modules表中ID
            "modname": "url",			// 活动类型名称
            "instance": 1,				// 实例ID
            "state": 0, 				// 是否完成
            "timecompleted": 1561447724,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 16,
            "modname": "page",
            "instance": 1,
            "state": 1,
            "timecompleted": 1559698324,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 19,
            "modname": "url",
            "instance": 2,
            "state": 1,
            "timecompleted": 1561447717,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 20,
            "modname": "page",
            "instance": 2,
            "state": 1,
            "timecompleted": 1561449219,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 9,
            "modname": "quiz",
            "instance": 1,
            "state": 1,
            "timecompleted": 1559698325,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 11,
            "modname": "assign",
            "instance": 3,
            "state": 0,
            "timecompleted": 1561447723,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 8,
            "modname": "resource",
            "instance": 1,
            "state": 1,
            "timecompleted": 1559698334,
            "tracking": 1,
            "overrideby": null
        },
        {
            "cmid": 10,
            "modname": "folder",
            "instance": 1,
            "state": 1,
            "timecompleted": 1559635308,
            "tracking": 1,
            "overrideby": null
        }
    ],
    "warnings": []
}
```

### 20.课程搜索

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_search_course  | 接口名称 | 是   |
| name               | string   | 高等数学                         | 课程全称 | 是   |

**返回**

```json
{
    "id": 2,				// 课程ID
    "fullname": "高等数学"	 // 课程全称
}
```



### 21.课程模糊搜索

**参数**

| 参数名             | 参数类型 | 参数值                           | 说明     | 非空 |
| ------------------ | -------- | -------------------------------- | -------- | ---- |
| moodlewsrestformat | string   | json                             | 参数格式 | 是   |
| wstoken            | string   | 814d15924533b8427dc6a222e04fcdb2 | 令牌     | 是   |
| wsfunction         | string   | block_data_screen_search_courses | 接口名称 | 是   |
| name               | string   | 课                               | 关键词   | 是   |
| user               | int      | 2                                | 用户ID   | 是   |
| role               | int      | 1                                | 用户角色 | 是   |

**返回**

```json
[
    {
        "semester": "2017-2018 上学期",
        "course_list": []
    },
    {
        "semester": "2017-2018 下学期",
        "course_list": []
    },
    {
        "semester": "2018-2019 上学期",
        "course_list": [
            {
                "id": null,
                "fullname": "在线课程设计"
            },
            {
                "id": null,
                "fullname": "开放课程"
            }
        ]
    }
]
```

